# Курсовая работа "Защищенный контур"
## Легенда

Компания Х использует корпоративное сетевое приложение "Защищённый контур", позволяющее "безопасно" обмениваться корпоративной информацией (в том числе хранить персональные данные клиентов и информацию, отнесённую к коммерческой тайне). Вам предстоит проанализировать само приложение на уязвимости, а также настройки ОС на серверах, где это приложение функционирует.

Компания разработчик поставляет уже настроенный сервер в виде [OVA](https://drive.google.com/file/d/1BK7-mqNB5a-og75xr9wWnEyWTz3IEc3A/view?usp=sharing) (md5 = 5935192d257a003b85584a84dec83367), который (по их заверениям) вполне безопасен и может использоваться "из коробки" (т.е. достаточно импортировать в среду виртуализации и можно запускать в боевой среде).

По информации, полученной от разработчика, цитата: "приложение содержит механизмы безопасности и может использоваться при построении ИСПД до 4 УЗ включительно и систем, обрабатывающих коммерческую тайну".

Документация на приложение разработчиком не предоставлена, поскольку, цитата: "интерфейс интуитивно понятный, обучающих материалов для пользователей не требуется".

Исходные коды так же не предоставлены.

Вас, как специалиста, попросили выполнить анализ данного приложения с точки зрения его реальной защищённости.

## Техническая информация

Цитата:
```
Логин/пароль пользователя в ОС OVA - system/system (после первого запуска необходимо сменить пароль).

Все файлы приложения располагаются в каталоге /opt/sk

Приложение предназначено для работы в ОС Linux x86_64

Приложение настроено в качестве сервиса systemd - sk.service

Приложение запускается на порту 8888 и использует протокол HTTP для своей работы, взаимодействие с приложением осуществляется через веб-интерфейс (посредством веб-браузера с хоста)

При импорте настроек виртуального образа в гипервизор, отличный от Virtual Box, может потребоваться дополнительная настройка сетевого интерфейса виртуального образа с помощью утилиты ip

При первом старте в приложении регистрируется пользователь с логином admin, пароль генерируется автоматически и записывается в файл /opt/sk/password.txt
```
Задачи:
<ul>
<li>провести комплексное исследование функционирующего приложения и исходных кодов.</li>
<li>Обратите внимание на код приложения, всё ли в порядке с зависимостями, верно ли собираются контейнеры</li>
</ul>
<h2>Отчет по работе</h2>
<h3>Несоответствие документу: “ФЕДЕРАЛЬНАЯ СЛУЖБА ПО ТЕХНИЧЕСКОМУ И ЭКСПОРТНОМУ КОНТРОЛЮ ПРИКАЗ от 18 февраля 2013 г. N 21”:</h3>
<ul>
<li>Несоответствие УПД.6 “Ограничение неуспешных попыток входа в информационную систему (доступа к информационной системе)” </li>
<li>Несоответствие ИАФ.5 “Защита обратной связи при вводе аутентификационной информации”</li>
<li>Несоответствие УПД.1 “Управление (заведение, активация, блокирование и уничтожение) учетными записями пользователей, в том числе внешних пользователей”
Пояснение: Нету активации и блокировки учетных записей.</li>
</ul>
<h3>Коммерческая тайна:</h3>
  <ul>
<li>Несоответствие "разрешение или запрет доступа к информации, составляющей коммерческую тайну" посредством механизмов разграничения доступа, встроенных в приложение.
Пояснение: При входе в учетную запись пользователя, который не имеет доступа к коммерческой тайн, он может получить доступ к странице КТ и тем самым доступ к файлам содержащую КТ обратившись по прямой ссылке http://{ip}:8888/commercial/index.html где {ip} это локальный ip адрес машины на которой находиться приложение</li>
  </ul>
  <h3>Найденные уязвимости:</h3>
  <ol>
 <li> Открыт 21 порт на котором находится 
сервис: vsftpd  
версия: 3.0.3
    <br>
У данной версии есть уязвимость - “Remote Denial of Service”  <a href="https://www.exploit-db.com/exploits/49719">EDB-ID:49719</a>
    
<h4>Эксплуатация уязвимости:</h4>скачиваем скрипт - <a href="https://www.exploit-db.com/exploits/49719">*клик*</a> и запускае его указав нужные параметры(можно запустить через несколько машин, либо используя прокси для достижении нужного результата), после чего сервис vsftpd на машине упадет.</b></i>
    <br>
   <h4> <i><b>Рекомендация по устранении уязвимости:</b></i></h4>
    <ul>
      <li>
Обновить сервис vsftpd до последней версии
      </li>
    </ul>
    <br>
    <h4><i><b>Скриншоты эксплуатации уязвимости:</b></i></h4>
    <img src="https://github.com/Medok228/Course-work-/blob/main/images/image10.png">
     <img src="https://github.com/Medok228/Course-work-/blob/main/images/image8.png">
    <img src="https://github.com/Medok228/Course-work-/blob/main/images/image1.png">
  </li>
    <li>Открыт 22 порт на котором находится
сервис: ssh
версия:OpenSSH 7.6p1 
      <br>
У данной версии есть уязвимость - “OpenSSH 2.3 < 7.7 - Username Enumeration” <a href="https://www.exploit-db.com/exploits/45233">EDB-ID:45233</a>
  <h4>Эксплуатация уязвимости:</h4>  
  скачиваем скрипт - <a href="https://www.exploit-db.com/exploits/45233">*клик*</a>  и запускае его указав нужные параметры после чего нам выдаст возможные логины сервиса
  <h4>Рекомендация по устранении уязвимости:</h4>
  <ul>
<li>установить сервисы предотвращающие переборы(fail2ban)</li>
<li>обновить сервис до последней версии</li>
  </ul>
<h4>Скриншоты эксплуатации уязвимости</h4>
   <img src="https://github.com/Medok228/Course-work-/blob/main/images/image3.png">
</li>
<li>
уязвимость IDOR, получение доступа к закрытым страницам сайта посредством обращение к ним прямыми ссылками
<h4>Эксплуатация уязвимости:</h4> вводим в адресную строку
http://{IP}:8888/commercial/index.html
Где {IP} это локальный ip адрес машины на которой находиться приложение
<h4>Рекомендация по устранении уязвимости;</h4>
  <ul>
    <li>
Установить проверку пользователя, есть ли права на указанную страницу или действие;</li>
  </ul>
<h4>Скриншоты эксплуатации уязвимости:</h4>
 <img src="https://github.com/Medok228/Course-work-/blob/main/images/image5.png">
 <img src="https://github.com/Medok228/Course-work-/blob/main/images/image4.png">
 <img src="https://github.com/Medok228/Course-work-/blob/main/images/image7.png">
</li>
<li>
уязвимость CWE-200 передача конфиденциальной информации неавторизованному субъекту, при вводе некорректного пользователя сервис выдает - “Неверно указан логин”, а при верном указанном логине - “Неверно указан пароль”, что дает возможность злоумышленнику узнать корректные имена пользователей
<h4>Эксплуатация уязвимости:</h4> 
  Выполнить перебор пользователей посредством использование сторонней утилиты
<h4>Рекомендация по устранении уязвимости:</h4>
  сделать один ответ при отправки формы пользователем - “Неверен логин или пароль”
<h4>Скриншоты эксплуатации уязвимости:</h4>
<img src="https://github.com/Medok228/Course-work-/blob/main/images/image6.png">

<img src="https://github.com/Medok228/Course-work-/blob/main/images/image9.png">
<img src="https://github.com/Medok228/Course-work-/blob/main/images/image11.png">
<img src="https://github.com/Medok228/Course-work-/blob/main/images/image2.png">

  
</li>

</ol>



  
